{"ast":null,"code":"var _s = $RefreshSig$();\nimport { collection, onSnapshot, orderBy, query, where } from \"firebase/firestore\";\nimport React from \"react\";\nimport { db } from \"../Firebase/config\";\nexport const useFirestore = (collect, condition) => {\n  _s();\n  const [document, setDocument] = React.useState([]);\n  console.log({\n    collect,\n    condition\n  });\n  React.useEffect(() => {\n    let isSubscribed = true;\n    const queryFunction = async () => {\n      const queryData = await query(collection(db, collect), where(condition.field, condition.operator, condition.compareValue), orderBy(\"createdAt\"));\n      onSnapshot(queryData, docsSnap => {\n        if (isSubscribed) {\n          setDocument(docsSnap.docs.map(doc => ({\n            ...doc.data(),\n            id: doc.id\n          })));\n        }\n      });\n      return () => isSubscribed = false;\n    };\n    queryFunction();\n  }, [collect, condition]);\n  return document;\n};\n_s(useFirestore, \"fVFrD9KWsGdNL+DW8cpIxyGqaOM=\");","map":{"version":3,"names":["collection","onSnapshot","orderBy","query","where","React","db","useFirestore","collect","condition","document","setDocument","useState","console","log","useEffect","isSubscribed","queryFunction","queryData","field","operator","compareValue","docsSnap","docs","map","doc","data","id"],"sources":["C:/Users/ADMIN/OneDrive/Máy tính/Backend/Auth/auth/src/hooks/useFirestore.js"],"sourcesContent":["import {\r\n  collection,\r\n  onSnapshot,\r\n  orderBy,\r\n  query,\r\n  where,\r\n} from \"firebase/firestore\";\r\nimport React from \"react\";\r\nimport { db } from \"../Firebase/config\";\r\n\r\nexport const useFirestore = (collect, condition) => {\r\n  const [document, setDocument] = React.useState([]);\r\n  console.log({ collect, condition });\r\n  React.useEffect(() => {\r\n    let isSubscribed = true;\r\n\r\n    const queryFunction = async () => {\r\n      const queryData = await query(\r\n        collection(db, collect),\r\n        where(condition.field, condition.operator, condition.compareValue),\r\n        orderBy(\"createdAt\")\r\n      );\r\n      onSnapshot(queryData, (docsSnap) => {\r\n        if (isSubscribed) {\r\n          setDocument(\r\n            docsSnap.docs.map((doc) => ({\r\n              ...doc.data(),\r\n              id: doc.id,\r\n            }))\r\n          );\r\n        }\r\n      });\r\n      return () => (isSubscribed = false);\r\n    };\r\n    queryFunction();\r\n  }, [collect, condition]);\r\n  return document;\r\n};\r\n"],"mappings":";AAAA,SACEA,UAAU,EACVC,UAAU,EACVC,OAAO,EACPC,KAAK,EACLC,KAAK,QACA,oBAAoB;AAC3B,OAAOC,KAAK,MAAM,OAAO;AACzB,SAASC,EAAE,QAAQ,oBAAoB;AAEvC,OAAO,MAAMC,YAAY,GAAG,CAACC,OAAO,EAAEC,SAAS,KAAK;EAAA;EAClD,MAAM,CAACC,QAAQ,EAAEC,WAAW,CAAC,GAAGN,KAAK,CAACO,QAAQ,CAAC,EAAE,CAAC;EAClDC,OAAO,CAACC,GAAG,CAAC;IAAEN,OAAO;IAAEC;EAAU,CAAC,CAAC;EACnCJ,KAAK,CAACU,SAAS,CAAC,MAAM;IACpB,IAAIC,YAAY,GAAG,IAAI;IAEvB,MAAMC,aAAa,GAAG,YAAY;MAChC,MAAMC,SAAS,GAAG,MAAMf,KAAK,CAC3BH,UAAU,CAACM,EAAE,EAAEE,OAAO,CAAC,EACvBJ,KAAK,CAACK,SAAS,CAACU,KAAK,EAAEV,SAAS,CAACW,QAAQ,EAAEX,SAAS,CAACY,YAAY,CAAC,EAClEnB,OAAO,CAAC,WAAW,CAAC,CACrB;MACDD,UAAU,CAACiB,SAAS,EAAGI,QAAQ,IAAK;QAClC,IAAIN,YAAY,EAAE;UAChBL,WAAW,CACTW,QAAQ,CAACC,IAAI,CAACC,GAAG,CAAEC,GAAG,KAAM;YAC1B,GAAGA,GAAG,CAACC,IAAI,EAAE;YACbC,EAAE,EAAEF,GAAG,CAACE;UACV,CAAC,CAAC,CAAC,CACJ;QACH;MACF,CAAC,CAAC;MACF,OAAO,MAAOX,YAAY,GAAG,KAAM;IACrC,CAAC;IACDC,aAAa,EAAE;EACjB,CAAC,EAAE,CAACT,OAAO,EAAEC,SAAS,CAAC,CAAC;EACxB,OAAOC,QAAQ;AACjB,CAAC;AAAC,GA3BWH,YAAY"},"metadata":{},"sourceType":"module","externalDependencies":[]}